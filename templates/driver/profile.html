{% extends "base/layout.html" %}

{% block title %}Kuljettajan profiili{% endblock %}

{% block content %}
<div class="container">
  <div class="section-padding">
    <div class="text-center mb-8">
      <h1 class="calculator-title">Kuljettajan profiili</h1>
      <p class="calculator-subtitle">{{ driver.name }}</p>
    </div>
  </div>

  <div class="mb-4">
    <a href="{{ url_for('driver.dashboard') }}" class="btn btn-ghost">← Takaisin työpöydälle</a>
  </div>

  <div class="calculator-grid" style="grid-template-columns: 1fr 1fr; gap: 2rem;">
    <!-- Profile Information -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">Profiilin tiedot</h2>
      </div>
      <div class="card-body">
        <div class="space-y-4">
          <div>
            <label class="form-label">Nimi</label>
            <p class="text-gray-900">{{ driver.name }}</p>
          </div>
          <div>
            <label class="form-label">Sähköposti</label>
            <p class="text-gray-900">{{ driver.email }}</p>
          </div>
          <div>
            <label class="form-label">Rooli</label>
            <p class="text-gray-900">Kuljettaja</p>
          </div>
          <div>
            <label class="form-label">Tili luotu</label>
            <p class="text-gray-900">{{ driver.created_at.strftime('%d.%m.%Y') if driver.created_at else 'Tuntematon' }}</p>
          </div>
          {% if driver.last_login %}
          <div>
            <label class="form-label">Viimeksi kirjautunut</label>
            <p class="text-gray-900">{{ driver.last_login|helsinki_time }}</p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Statistics -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">Työtilastot</h2>
      </div>
      <div class="card-body">
        <div class="grid grid-cols-2 gap-4">
          <div class="text-center">
            <div class="text-3xl font-bold text-blue-600 mb-2">{{ stats.total_jobs }}</div>
            <div class="text-sm text-gray-600">Yhteensä töitä</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-green-600 mb-2">{{ stats.completed_jobs }}</div>
            <div class="text-sm text-gray-600">Suoritettu</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-purple-600 mb-2">{{ stats.active_jobs }}</div>
            <div class="text-sm text-gray-600">Aktiivisia</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-orange-600 mb-2">{{ "%.1f"|format(stats.completion_rate) }}%</div>
            <div class="text-sm text-gray-600">Onnistumisprosentti</div>
          </div>
        </div>

        {% if stats.total_jobs > 0 %}
        <div class="mt-6 pt-4 border-t">
          <h3 class="font-semibold mb-3">Suorituskyky</h3>
          <div class="space-y-2">
            <div class="flex justify-between text-sm">
              <span>Suoritetut työt:</span>
              <span>{{ stats.completed_jobs }} / {{ stats.total_jobs }}</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div class="bg-green-600 h-2 rounded-full" style="width: {{ stats.completion_rate }}%"></div>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="mt-8">
    <div class="calculator-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
      <a href="{{ url_for('driver.jobs') }}" class="btn btn-primary">Selaa töitä</a>
      <a href="{{ url_for('driver.my_jobs') }}" class="btn btn-secondary">Omat työt</a>
      <a href="{{ url_for('logout') }}" class="btn btn-ghost">Kirjaudu ulos</a>
    </div>
  </div>
</div>
{% endblock %}